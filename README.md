# drf-social-network

Проект **drf-social-network** представляет собой демонстрационный образец социальной сети, реализованной на базе Django REST Framework. Он предназначен для демонстрации возможностей построения RESTful API с современными паттернами архитектуры и технологиями. Проект написан как pet-проект и включает функционал, характерный для простых социальных платформ, с акцентом на модульность и расширяемость.

## Основные возможности

- **Регистрация и аутентификация пользователей**: пользователи могут создавать учетные записи и получать JWT-токены для доступа к API.
    
- **CRUD для постов**: создание, получение (список/детали), редактирование и удаление постов авторизованными пользователями.
    
- **Лайки постов**: пользователи могут ставить «лайки» публикациям.
    
- **Комментарии**: возможность добавлять, редактировать и удалять комментарии к постам.
    
- **Права доступа**: только автор поста или комментария может изменять или удалять его.
---
## Архитектура приложения

Приложение спроектировано с разделением ответственности по слоям. Для организации кода используются следующие паттерны:

- **DTO (Data Transfer Object)**: специальные классы для передачи данных между слоями приложения, отделяя их от моделей базы данных.
    
- **Сервисный слой (services)**: содержит бизнес-логику приложения (например, создание/редактирование постов и комментариев, отправка уведомлений и т.д.).
    
- **Репозитории (repositories)**: слой для работы с базой данных, инкапсулирующий операции CRUD над моделями.
    
- **Права доступа**: класс `IsOwnerOrReadOnly` ограничивает модификацию объектов только их создателями.
    
- **Асинхронные задачи**: Celery используется для отправки уведомлений по электронной почте с помощью брокера Redis.
---
## Используемые технологии

- **Django REST Framework (DRF)**: основной фреймворк для создания RESTful API.
    
- **Celery & Redis**: фоновые задачи и брокер сообщений/кеш.
    
- **Redis**: также используется для подсчета просмотров постов.
    
- **JWT (JSON Web Token)**: механизм аутентификации и авторизации.
    
- **PostgreSQL**: реляционная база данных.
    
- **Docker & Docker Compose**: контейнеризация и управление многоконтейнерной средой.
    
- **DRF Spectacular**: автоматическая генерация документации API (OpenAPI/Swagger).
    
- **Pytest**: фреймворк для написания и запуска тестов.
---
## Примеры запросов к API

Ниже приведены примеры работы с API с использованием `curl`. Перед началом необходимо зарегистрировать пользователя и получить JWT-токен.

### Регистрация пользователя и получение JWT-токена

```
curl -X POST http://localhost/api/users/ \
  -H "Content-Type: application/json" \
  -d '{"username":"ivan", "password":"pass1234"}'

curl -X POST http://localhost/api/auth/jwt/create/ \
  -H "Content-Type: application/json" \
  -d '{"username":"ivan", "password":"pass1234"}'
```

### Создание нового поста (требуется JWT-токен)

```
curl -X POST http://localhost/api/posts/ \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <ваш_токен>" \
  -d '{"title": "Мой первый пост", "text": "Привет, мир!"}'
```

### Получение списка постов

```
curl -H "Authorization: Bearer <ваш_токен>" http://localhost/api/posts/
```

### Поставить лайк посту

```
curl -X POST http://localhost/api/posts/1/like/ \
  -H "Authorization: Bearer <ваш_токен>"
```

### Добавить комментарий к посту

```
curl -X POST http://localhost/api/posts/1/comments/ \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <ваш_токен>" \
  -d '{"text": "Отличный пост!"}'
```

Кроме того, доступна интерактивная документация API Swagger UI по адресу:

```
http://localhost/api/schema/swagger-ui/
```
---
## Установка и настройка

1. **Клонируйте репозиторий**:

   ```bash
   git clone https://github.com/UsmanA07/drf-social-network.git
   cd drf-social-network
   ```
2. **Запустите проект**

   ```bash
   docker-compose up --build
   ```
---
## Структура проекта

Проект организован по принципу «приложений» Django, каждое из которых отвечает за свой набор функций:

- **drf_social_network/**: основной модуль проекта (настройки Django, маршруты, базовая конфигурация).
    
- **user/**: управление пользователями (модель, регистрация, аутентификация, профили).
    
- **post/**: работа с постами (модель, сериализаторы, представления, сервисы, репозитории).
    
- **comment/**: комментарии (модель, логика добавления/редактирования/удаления).
    
- В каждом приложении: `models.py`, `serializers.py`, `views.py`, `services.py`, `repositories.py` и другие вспомогательные файлы.
    
- **Dockerfile** и **docker-compose.yml**: контейнеризация приложения.
    
- **requirements.txt**: зависимости проекта.
    
- **tests/**: модули для тестирования (Pytest).
